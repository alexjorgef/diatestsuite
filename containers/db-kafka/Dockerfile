FROM confluentinc/cp-kafka:latest

COPY server.properties /etc/kafka/server.properties
COPY zookeeper.properties /etc/kafka/zookeeper.properties

EXPOSE 9092/tcp
EXPOSE 2181/tcp

# ENV HOSTNAME_COMMAND="docker info | grep ^Name: | cut -d' ' -f 2"
# ENV KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
# ENV KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=INSIDE:PLAINTEXT,OUTSIDE:PLAINTEXT
# # ENV KAFKA_ADVERTISED_LISTENERS: INSIDE://:9092,OUTSIDE://_{HOSTNAME_COMMAND}:9094
# ENV KAFKA_ADVERTISED_LISTENERS=INSIDE://:9092,OUTSIDE://kafka0:9094
# ENV KAFKA_LISTENERS=INSIDE://:9092,OUTSIDE://:9094
# ENV KAFKA_INTER_BROKER_LISTENER_NAME=INSIDE
# ENV KAFKA_LOG_DIRS=/kafka/kafka-logs-1
# # ENV KAFKA_LOG_RETENTION_BYTES: -1
# # ENV KAFKA_LOG_RETENTION_HOURS: -1
# ENV KAFKA_DELETE_TOPIC_ENABLE="true"
# ENV KAFKA_MESSAGE_MAX_BYTES=50000000

CMD ["/etc/confluent/docker/run"]
