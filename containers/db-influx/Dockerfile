FROM influxdb:2.6

COPY influxdb.conf /etc/influxdb/influxdb.conf

EXPOSE 8086/tcp
EXPOSE 8088/tcp

ENV INFLUXDB_HTTP_MAX_BODY_SIZE=0
ENV INFLUXDB_DATA_CACHE_MAX_MEMORY_SIZE=4g
ENV INFLUXDB_DATA_MAX_INDEX_LOG_FILE_SIZE=8m

ENV DOCKER_INFLUXDB_INIT_USERNAME=diadata_user
ENV DOCKER_INFLUXDB_INIT_PASSWORD=diadata_pw
ENV DOCKER_INFLUXDB_INIT_ORG=diadata
ENV DOCKER_INFLUXDB_INIT_BUCKET=diadata_b
ENV DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=diadata_token

CMD ["influxd"]