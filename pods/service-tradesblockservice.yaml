apiVersion: "v1"
kind: Pod
metadata:
  name: "diadata-clusterdev-service-tradesblockservice"
spec:
  containers:
  - name: clusterdev-service-tradesblockservice
    image: diadata-clusterdev-service-tradesblockservice:0.1
    command: ["tradesBlockService"]
    args: ["-historical=true", "-testing=true"]
    env:
    - name: USE_ENV
      value: "true"
    - name: POSTGRES_HOST
      value: "clusterdev-db-postgres-service.default.svc.cluster.local"
    - name: POSTGRES_USER
      value: "diadata_psql_user"
    - name: POSTGRES_PASSWORD
      value: "diadata_psql_pass"
    - name: POSTGRES_DB
      value: "diadata_psql_db"
    - name: INFLUXURL
      value: "http://clusterdev-db-influx-service.default.svc.cluster.local:8086"
    - name: INFLUXUSER
      value: "diadata_user"
    - name: INFLUXPASSWORD
      value: "diadata_pw"
    - name: REDISURL
      value: "clusterdev-db-redis-service.default.svc.cluster.local:6379"
    - name: KAFKAURL
      value: "clusterdev-db-kafka-service.default.svc.cluster.local:9094"
  initContainers:
  - name: check-postgres-connection
    image: postgres:latest
    env:
    - name: PGHOST
      value: "clusterdev-db-postgres-service.default.svc.cluster.local"
    - name: PGUSER
      value: "diadata_psql_user"
    - name: PGPASSWORD
      value: "diadata_psql_pass"
    command: ["sh", "-c", "until pg_isready -h $PGHOST -U $PGUSER; do sleep 1; done"]
  - name: clusterdev-service-blockchainservice
    image: diadata-clusterdev-service-blockchainservice:0.1
    command: ["blockchainservice"]
    args: []
    env:
    - name: USE_ENV
      value: "true"
    - name: POSTGRES_USER
      value: "diadata_psql_user"
    - name: POSTGRES_PASSWORD
      value: "diadata_psql_pass"
    - name: POSTGRES_DB
      value: "diadata_psql_db"
    - name: POSTGRES_HOST
      value: "clusterdev-db-postgres-service.default.svc.cluster.local"
    - name: INFLUXURL
      value: "http://clusterdev-db-influx-service.default.svc.cluster.local:8086"
    - name: INFLUXUSER
      value: "diadata_user"
    - name: INFLUXPASSWORD
      value: "diadata_pw"
    - name: REDISURL
      value: "clusterdev-db-redis-service.default.svc.cluster.local:6379"
    - name: KAFKAURL
      value: "clusterdev-db-kafka-service.default.svc.cluster.local:9094"
  - name: clusterdev-service-assetcollectionservice-ethassets
    image: diadata-clusterdev-service-assetcollectionservice:0.1
    command: ["assetCollectionService"]
    args: ["-source=assetlists", "-secret=eth_assets", "-caching=false"]
    env:
      - name: USE_ENV
        value: "true"
      - name: POSTGRES_USER
        value: "diadata_psql_user"
      - name: POSTGRES_PASSWORD
        value: "diadata_psql_pass"
      - name: POSTGRES_DB
        value: "diadata_psql_db"
      - name: POSTGRES_HOST
        value: "clusterdev-db-postgres-service.default.svc.cluster.local"
      - name: INFLUXURL
        value: "http://clusterdev-db-influx-service.default.svc.cluster.local:8086"
      - name: INFLUXUSER
        value: "diadata_user"
      - name: INFLUXPASSWORD
        value: "diadata_pw"
      - name: REDISURL
        value: "clusterdev-db-redis-service.default.svc.cluster.local:6379"
      - name: KAFKAURL
        value: "clusterdev-db-kafka-service.default.svc.cluster.local:9094"
  - name: clusterdev-service-assetcollectionservice-nonethassets
    image: diadata-clusterdev-service-assetcollectionservice:0.1
    command: ["assetCollectionService"]
    args: ["-source=assetlists", "-secret=non_eth_assets", "-caching=false"]
    env:
      - name: USE_ENV
        value: "true"
      - name: POSTGRES_USER
        value: "diadata_psql_user"
      - name: POSTGRES_PASSWORD
        value: "diadata_psql_pass"
      - name: POSTGRES_DB
        value: "diadata_psql_db"
      - name: POSTGRES_HOST
        value: "clusterdev-db-postgres-service.default.svc.cluster.local"
      - name: INFLUXURL
        value: "http://clusterdev-db-influx-service.default.svc.cluster.local:8086"
      - name: INFLUXUSER
        value: "diadata_user"
      - name: INFLUXPASSWORD
        value: "diadata_pw"
      - name: REDISURL
        value: "clusterdev-db-redis-service.default.svc.cluster.local:6379"
      - name: KAFKAURL
        value: "clusterdev-db-kafka-service.default.svc.cluster.local:9094"
  - name: clusterdev-service-assetcollectionservice-fiatassets
    image: diadata-clusterdev-service-assetcollectionservice:0.1
    command: ["assetCollectionService"]
    args: ["-source=assetlists", "-secret=fiat_assets", "-caching=false"]
    env:
      - name: USE_ENV
        value: "true"
      - name: POSTGRES_USER
        value: "diadata_psql_user"
      - name: POSTGRES_PASSWORD
        value: "diadata_psql_pass"
      - name: POSTGRES_DB
        value: "diadata_psql_db"
      - name: POSTGRES_HOST
        value: "clusterdev-db-postgres-service.default.svc.cluster.local"
      - name: INFLUXURL
        value: "http://clusterdev-db-influx-service.default.svc.cluster.local:8086"
      - name: INFLUXUSER
        value: "diadata_user"
      - name: INFLUXPASSWORD
        value: "diadata_pw"
      - name: REDISURL
        value: "clusterdev-db-redis-service.default.svc.cluster.local:6379"
      - name: KAFKAURL
        value: "clusterdev-db-kafka-service.default.svc.cluster.local:9094"